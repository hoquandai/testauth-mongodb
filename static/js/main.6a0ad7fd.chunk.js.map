{"version":3,"sources":["index.js"],"names":["User","name","data","Demo","props","state","currentUser","this","setupStitch","appId","client","Stitch","hasAppClient","getAppClient","initializeAppClient","auth","hasRedirectResult","handleRedirectResult","catch","console","error","log","isLoggedIn","cu","user","setState","credential","GoogleRedirectCredential","loginWithRedirect","profile","React","Component","ReactDOM","render","document","getElementById"],"mappings":"kPAQQA,EAAO,SAAC,GAAD,IAASC,EAAT,EAAGC,KAAH,OAAoBD,GAAQ,6BAAK,6BAAMA,KAG9CE,E,YACJ,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACXC,aAAa,GAHE,E,6KAQXC,KAAKC,e,sKAQLC,EAAQ,mBAGRC,EAASC,IAAOC,aAAaH,GAC/BE,IAAOE,aAAaJ,GACpBE,IAAOG,oBAAoBL,IAMpBM,KAAKC,oB,0CACRN,EAAOK,KAAKE,uBAAuBC,MAAMC,QAAQC,Q,OACvDD,QAAQE,IAAI,8B,OAGVX,EAAOK,KAAKO,YAEVC,EAAKb,EAAOK,KAAKS,KACrBjB,KAAKkB,SAAS,CAAEnB,YAAaiB,MAGvBG,EAAa,IAAIC,IACvBjB,EAAOK,KAAKa,kBAAkBF,I,gFAKxB,IACApB,EAAgBC,KAAKF,MAArBC,YACR,OAAQA,EAEJ,kBAACN,EAAD,CAAM6B,QAASvB,EAAYuB,UAD3B,4D,GAhDWC,IAAMC,WAuDzBC,IAASC,OACP,kBAAC9B,EAAD,MACA+B,SAASC,eAAe,W","file":"static/js/main.6a0ad7fd.chunk.js","sourcesContent":["  import React from 'react';\n  import ReactDOM from 'react-dom';\n\n  //start stitch import\n  import { Stitch, GoogleRedirectCredential } from \"mongodb-stitch-browser-sdk\";\n  //end stitch import\n\n  // Create a component to display google auth user information\n  const User = ({ data: name }) => name && <div><pre>{name}</pre></div>\n\n  // Create the main component\n  class Demo extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        currentUser: false\n      }\n    }\n\n    async componentDidMount() {\n      await this.setupStitch();\n    }\n\n    //start stitch setup\n    async setupStitch() {\n      //copy the name of your google-auth enabled stitch application here\n      //the name of the app will typically be the stitch application name\n      //with a \"-\"\" + random string appended\n      const appId = 'testauth-gelqb';\n\n      // Get a client for your Stitch app, or instantiate a new one\n      const client = Stitch.hasAppClient(appId)\n        ? Stitch.getAppClient(appId)\n        : Stitch.initializeAppClient(appId);\n\n      //manage user authentication state\n      \n      // Check if this user has already authenticated and we're here\n      // from the redirect. If so, process the redirect to finish login.\n      if (client.auth.hasRedirectResult()) {\n        await client.auth.handleRedirectResult().catch(console.error);\n        console.log(\"Processed redirect result.\")\n      }\n\n      if (client.auth.isLoggedIn) {\n        // The user is logged in. Add their user object to component state.\n        var cu = client.auth.user;\n        this.setState({ currentUser: cu});\n      } else {\n        // The user has not yet authenticated. Begin the Google login flow.\n        const credential = new GoogleRedirectCredential();\n        client.auth.loginWithRedirect(credential);\n      }\n    }\n    //end stitch setup\n\n    render() {\n      const { currentUser } = this.state;\n      return !currentUser\n        ? <div>User must authenticate.</div>\n        : <User profile={currentUser.profile}/>\n    }\n  }\n\n  // ========================================\n     \n  ReactDOM.render(\n    <Demo />,\n    document.getElementById('root')\n  );\n"],"sourceRoot":""}