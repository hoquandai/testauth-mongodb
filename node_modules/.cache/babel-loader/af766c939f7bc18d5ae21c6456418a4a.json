{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport AuthInfo from \"../AuthInfo\";\nimport StoreCoreUserProfile from \"./StoreCoreUserProfile\";\nimport StoreStitchUserIdentity from \"./StoreStitchUserIdentity\";\nvar Fields;\n\n(function (Fields) {\n  Fields[\"USER_ID\"] = \"user_id\";\n  Fields[\"DEVICE_ID\"] = \"device_id\";\n  Fields[\"ACCESS_TOKEN\"] = \"access_token\";\n  Fields[\"REFRESH_TOKEN\"] = \"refresh_token\";\n  Fields[\"LOGGED_IN_PROVIDER_TYPE\"] = \"logged_in_provider_type\";\n  Fields[\"LOGGED_IN_PROVIDER_NAME\"] = \"logged_in_provider_name\";\n  Fields[\"USER_PROFILE\"] = \"user_profile\";\n})(Fields || (Fields = {}));\n\nfunction readFromStorage(storage) {\n  var rawInfo = storage.get(StoreAuthInfo.STORAGE_NAME);\n\n  if (!rawInfo) {\n    return undefined;\n  }\n\n  return StoreAuthInfo.decode(JSON.parse(rawInfo));\n}\n\nfunction writeToStorage(authInfo, storage) {\n  var info = new StoreAuthInfo(authInfo.userId, authInfo.deviceId, authInfo.accessToken, authInfo.refreshToken, authInfo.loggedInProviderType, authInfo.loggedInProviderName, authInfo.userProfile ? new StoreCoreUserProfile(authInfo.userProfile.userType, authInfo.userProfile.data, authInfo.userProfile.identities.map(function (identity) {\n    return new StoreStitchUserIdentity(identity.id, identity.providerType);\n  })) : undefined);\n  storage.set(StoreAuthInfo.STORAGE_NAME, JSON.stringify(info.encode()));\n}\n\nvar StoreAuthInfo = function (_super) {\n  __extends(StoreAuthInfo, _super);\n\n  function StoreAuthInfo(userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, userProfile) {\n    var _this = _super.call(this, userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, userProfile) || this;\n\n    _this.userProfile = userProfile;\n    return _this;\n  }\n\n  StoreAuthInfo.decode = function (from) {\n    var userId = from[Fields.USER_ID];\n    var deviceId = from[Fields.DEVICE_ID];\n    var accessToken = from[Fields.ACCESS_TOKEN];\n    var refreshToken = from[Fields.REFRESH_TOKEN];\n    var loggedInProviderType = from[Fields.LOGGED_IN_PROVIDER_TYPE];\n    var loggedInProviderName = from[Fields.LOGGED_IN_PROVIDER_NAME];\n    var userProfile = from[Fields.USER_PROFILE];\n    return new StoreAuthInfo(userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, StoreCoreUserProfile.decode(userProfile));\n  };\n\n  StoreAuthInfo.prototype.encode = function () {\n    var to = {};\n    to[Fields.USER_ID] = this.userId;\n    to[Fields.ACCESS_TOKEN] = this.accessToken;\n    to[Fields.REFRESH_TOKEN] = this.refreshToken;\n    to[Fields.DEVICE_ID] = this.deviceId;\n    to[Fields.LOGGED_IN_PROVIDER_NAME] = this.loggedInProviderName;\n    to[Fields.LOGGED_IN_PROVIDER_TYPE] = this.loggedInProviderType;\n    to[Fields.USER_PROFILE] = this.userProfile ? this.userProfile.encode() : undefined;\n    return to;\n  };\n\n  StoreAuthInfo.STORAGE_NAME = \"auth_info\";\n  return StoreAuthInfo;\n}(AuthInfo);\n\nexport { StoreAuthInfo, readFromStorage, writeToStorage };","map":{"version":3,"sources":["../../../../../src/auth/internal/models/StoreAuthInfo.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport AuthInfo from \"../AuthInfo\";\nimport StoreCoreUserProfile from \"./StoreCoreUserProfile\";\nimport StoreStitchUserIdentity from \"./StoreStitchUserIdentity\";\nvar Fields;\n(function (Fields) {\n    Fields[\"USER_ID\"] = \"user_id\";\n    Fields[\"DEVICE_ID\"] = \"device_id\";\n    Fields[\"ACCESS_TOKEN\"] = \"access_token\";\n    Fields[\"REFRESH_TOKEN\"] = \"refresh_token\";\n    Fields[\"LOGGED_IN_PROVIDER_TYPE\"] = \"logged_in_provider_type\";\n    Fields[\"LOGGED_IN_PROVIDER_NAME\"] = \"logged_in_provider_name\";\n    Fields[\"USER_PROFILE\"] = \"user_profile\";\n})(Fields || (Fields = {}));\nfunction readFromStorage(storage) {\n    var rawInfo = storage.get(StoreAuthInfo.STORAGE_NAME);\n    if (!rawInfo) {\n        return undefined;\n    }\n    return StoreAuthInfo.decode(JSON.parse(rawInfo));\n}\nfunction writeToStorage(authInfo, storage) {\n    var info = new StoreAuthInfo(authInfo.userId, authInfo.deviceId, authInfo.accessToken, authInfo.refreshToken, authInfo.loggedInProviderType, authInfo.loggedInProviderName, authInfo.userProfile\n        ? new StoreCoreUserProfile(authInfo.userProfile.userType, authInfo.userProfile.data, authInfo.userProfile.identities.map(function (identity) {\n            return new StoreStitchUserIdentity(identity.id, identity.providerType);\n        }))\n        : undefined);\n    storage.set(StoreAuthInfo.STORAGE_NAME, JSON.stringify(info.encode()));\n}\nvar StoreAuthInfo = (function (_super) {\n    __extends(StoreAuthInfo, _super);\n    function StoreAuthInfo(userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, userProfile) {\n        var _this = _super.call(this, userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, userProfile) || this;\n        _this.userProfile = userProfile;\n        return _this;\n    }\n    StoreAuthInfo.decode = function (from) {\n        var userId = from[Fields.USER_ID];\n        var deviceId = from[Fields.DEVICE_ID];\n        var accessToken = from[Fields.ACCESS_TOKEN];\n        var refreshToken = from[Fields.REFRESH_TOKEN];\n        var loggedInProviderType = from[Fields.LOGGED_IN_PROVIDER_TYPE];\n        var loggedInProviderName = from[Fields.LOGGED_IN_PROVIDER_NAME];\n        var userProfile = from[Fields.USER_PROFILE];\n        return new StoreAuthInfo(userId, deviceId, accessToken, refreshToken, loggedInProviderType, loggedInProviderName, StoreCoreUserProfile.decode(userProfile));\n    };\n    StoreAuthInfo.prototype.encode = function () {\n        var to = {};\n        to[Fields.USER_ID] = this.userId;\n        to[Fields.ACCESS_TOKEN] = this.accessToken;\n        to[Fields.REFRESH_TOKEN] = this.refreshToken;\n        to[Fields.DEVICE_ID] = this.deviceId;\n        to[Fields.LOGGED_IN_PROVIDER_NAME] = this.loggedInProviderName;\n        to[Fields.LOGGED_IN_PROVIDER_TYPE] = this.loggedInProviderType;\n        to[Fields.USER_PROFILE] = this.userProfile\n            ? this.userProfile.encode()\n            : undefined;\n        return to;\n    };\n    StoreAuthInfo.STORAGE_NAME = \"auth_info\";\n    return StoreAuthInfo;\n}(AuthInfo));\nexport { StoreAuthInfo, readFromStorage, writeToStorage };\n//# sourceMappingURL=StoreAuthInfo.js.map"]},"metadata":{},"sourceType":"module"}